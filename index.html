<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <!-- TODO is it safe ? -->
<!--     <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'">
    <meta http-equiv="X-Content-Security-Policy" content="default-src 'self'; script-src 'self'"> -->
    <title>Electron Audio</title>
  </head>
  <!-- https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements -->
  <body>
    <div>
      <button
        onclick="postRequest('http://localhost:4000/audio/nowy-swiat/play')"
      >
        Nowy Swiat
      </button>
      <button
        onclick="postRequest('http://localhost:4000/audio/nowy-swiat/pause')"
      >
        Pause
      </button>
      <input type="range" min="0" max="1" value="1" step="any" id="volume" onchange="sendVolume(this.value)">
    </div>
    <button
      style="margin-top: 20px"
      onclick="postRequest('http://localhost:4000/refresh')"
    >
      Refresh
    </button>

    <!-- You can also require other files to run in this process -->
    <script src="./renderer.js"></script>

    <script type="text/javascript">
      function sendVolume(value) {
        postRequest('http://localhost:4000/audio/nowy-swiat/volume', { value: parseFloat(value) })
      }
      async function setInitialVolume() {
        document.querySelector('#volume').value = (await getRequest('http://localhost:4000/audio/nowy-swiat/volume')).value;
      }
      setInitialVolume();

    </script>
  </body>
</html>
